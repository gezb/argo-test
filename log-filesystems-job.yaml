apiVersion: batch/v1
kind: Job
metadata:
  name: pharos-log-filesystems-testrunid
  namespace: core-services
  labels:
    service: pharos-batch
    runMode: LOG_FILESYSTEMS
spec:
  backoffLimit: 0
  template:
    spec:
      restartPolicy: Never
      serviceAccount: pharos-batch
      containers:
      - name: pharos-log-filesystems-testrunid
        image: pharos-batch:0.0.1
        imagePullPolicy: Never
        env:
        - name: RUN_MODE
          value: LOG_FILESYSTEMS
        - name: SERVICE_ID
          value: pharos-batch
        - name: NAMESPACE
          value: default
        - name: SERVICE_ACCOUNT_NAME
          value: pharos-batch
        - name: IMAGE_NAME
          value: pharos-batch:0.0.1
        - name: FILE_CHUNK_SIZE
          value: "1G"
        - name: FILESYSTEM_ROOT_DIRECTORY
          value: /mnt/
        volumeMounts:
        - mountPath: /mnt/efs-root
          name: filesystem
      volumes:
        - name: filesystem
          persistentVolumeClaim:
            claimName: efs-root

    
